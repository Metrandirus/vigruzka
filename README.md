# Product Feed Filter (GitHub Actions)

Этот репозиторий автоматически **забирает большой прайс/остатки по ссылке** (XLS/XLSX/CSV),
**фильтрует по списку артикулов**, и публикует результаты в `public/filtered_products.csv` и
`public/filtered_products.json`. Обновления запускаются **по расписанию** и **вручную** через GitHub Actions.

## Быстрый старт

1. **Создайте репозиторий** на GitHub и загрузите в него содержимое этого архива.
2. Откройте *Settings → Secrets and variables → Actions → New repository secret* и добавьте секрет:
   - `FEED_URL` — ссылка на ваш файл (XLS/XLSX/CSV), который постоянно обновляется.
3. В файле `config.yaml` укажите **названия колонок** из вашего файла (например, `Артикул`, `Остаток`, `Цена` и т.д.).
4. Заполните `data/skus.txt` — по одному артикулу в строке.
5. Зайдите во вкладку **Actions** и нажмите **Run workflow** у задачи **Update filtered product feed**.
6. Результат появится в `public/filtered_products.csv` и `public/filtered_products.json`.
7. (Опционально) Включите **GitHub Pages** для папки `/public`, чтобы раздавать CSV/JSON как веб‑ссылки.

## Формат входного файла

Поддерживаются:
- Excel: `.xls`, `.xlsx` (укажите `sheet_name` при необходимости)
- CSV: укажите `delimiter`, `encoding` и `decimal` (десятичный разделитель), если нужно

## Формат выхода

`public/filtered_products.csv` и `public/filtered_products.json` содержат поля:

- `sku` — артикул
- `name` — наименование
- `qty` — остаток (целое число, если возможно)
- `price` — цена (число с точкой)

Названия исходных колонок на стороне поставщика настраиваются в `config.yaml`.

## Как поменять расписание

Откройте `.github/workflows/update.yml` и отредактируйте строку `cron:` под нужное время.
Например, чтобы запускать каждый день в 07:00 по UTC:
```
schedule:
  - cron: "0 7 * * *"
```

## Отладка

- Если названия колонок не совпадают, скрипт подскажет, какие есть в файле.
- Если CSV с запятой как десятичным разделителем — задайте `decimal: ","` в `config.yaml`.

